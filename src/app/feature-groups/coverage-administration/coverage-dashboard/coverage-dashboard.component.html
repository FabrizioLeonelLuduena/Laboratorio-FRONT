<div class="min-h-screen">
  <div class="w-full mx-auto px-6 pb-6 md:pb-[calc(24px+var(--footer-height,52px)+16px)]">

    <p-tabView>
      <p-tabPanel header="Coberturas">
        <app-coverage-date-filters (filtersChanged)="onFiltersChanged($event)"></app-coverage-date-filters>

        <section class="grid grid-cols-1 gap-4 my-6 sm:grid-cols-2 lg:grid-cols-4">
          @for (metric of metrics; track $index) {
            <app-dashboard-metric-card [metric]="metric"></app-dashboard-metric-card>
          }
        </section>

        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
          @for (card of chartCards; track $index) {
            @defer {
              <app-dashboard-chart-card
                [ngClass]="$index === 4 ? 'lg:col-span-2' : ''"
                [title]="card.title"
                [description]="card.description"
                [icon]="card.icon ?? 'pi pi-chart-bar'"
                [helpText]="card.helpText"
                [chartType]="card.chartType"
                [data]="card.data"
                [options]="card.options"
                [footer]="card.footer"
                [referenceValues]="card.referenceValues">
              </app-dashboard-chart-card>
            } @loading {
              <div class="border border-[var(--border-color)] rounded-lg bg-[var(--surface-card)] p-4">
                <p-skeleton height="24px" styleClass="mb-3"></p-skeleton>
                <p-skeleton height="260px"></p-skeleton>
              </div>
            } @placeholder {
              <div class="border border-[var(--border-color)] rounded-lg bg-[var(--surface-card)] p-4">
                <p-skeleton height="24px" styleClass="mb-3"></p-skeleton>
                <p-skeleton height="260px"></p-skeleton>
              </div>
            }
          }
        </section>
      </p-tabPanel>

      <p-tabPanel header="FacturaciÃ³n">
        <app-billing-dashboard></app-billing-dashboard>
      </p-tabPanel>
    </p-tabView>

  </div>
</div>
