<p-card class="h-full min-h-[160px] transition-all duration-200 hover:shadow-lg [&::ng-deep_.p-card]:h-full [&::ng-deep_.p-card]:flex [&::ng-deep_.p-card]:flex-col [&::ng-deep_.p-card-body]:flex [&::ng-deep_.p-card-body]:flex-col [&::ng-deep_.p-card-body]:flex-1">
  <div class="flex flex-col gap-4">
    <!-- Header con Ã­cono destacado -->
    <div class="flex items-start justify-between gap-3">
      <div 
        class="flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-[var(--surface-ground)] to-[var(--surface-border)] transition-transform hover:scale-110 shadow-sm"
        [pTooltip]="metric.helpText"
        tooltipPosition="top"
        [showDelay]="300">
        <i [ngClass]="[metric.icon, iconAccent(metric.accent)]" class="text-2xl"></i>
      </div>
      <p-button
        icon="pi pi-info-circle"
        [text]="true"
        [rounded]="true"
        size="small"
        severity="secondary"
        class="w-8 h-8 min-w-8"
        [pTooltip]="metric.helpText"
        tooltipPosition="left"
        [showDelay]="100">
      </p-button>
    </div>

    <!-- Label siempre visible -->
    <div class="flex flex-col gap-2">
      <h3 class="text-xs font-semibold text-[var(--on-surface-muted)] uppercase tracking-wider m-0 sm:text-sm">
        {{ metric.label }}
      </h3>
      
      <!-- Valor principal - siempre visible y destacado -->
      <div class="flex items-baseline gap-2">
        <span class="text-2xl font-bold text-[var(--on-surface)] leading-none sm:text-[32px]" [pTooltip]="'Valor actual: ' + metric.value">
          {{ metric.value }}
        </span>
      </div>

      <!-- Subtexto descriptivo -->
      <p class="text-[0.7rem] text-[var(--on-surface-muted)] m-0 leading-relaxed sm:text-xs">
        <i class="pi pi-clock text-[0.65rem] mr-1"></i>
        {{ metric.subtext }}
      </p>
    </div>
  </div>
</p-card>

<app-generic-modal-form
  [visible]="infoVisible"
  [title]="metric.label"
  [width]="'520px'"
  (closed)="closeInfo()">
  <div class="p-4 text-sm text-[var(--on-surface)]">
    <p class="m-0">{{ metric.helpText }}</p>
  </div>
</app-generic-modal-form>

